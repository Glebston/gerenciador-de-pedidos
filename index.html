<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval'; script-src * 'unsafe-inline' 'unsafe-eval'; connect-src * 'unsafe-inline'; img-src * data: blob: 'unsafe-inline'; frame-src *; style-src * 'unsafe-inline';">
    
    <title>PagLucro Gestor</title>
    <link rel="icon" href="https://i.ibb.co/jkT6MKqr/logo-paglucro-gestor.png">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
    <script src="https://cdn.tailwindcss.com/3.4.1"></script>

    <script>
        window.onload = function() {
            if (typeof tailwind !== 'undefined') {
                tailwind.config = { theme: { extend: {} } };
            }
        };
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* === A CORRE√á√ÉO T√âCNICA (v5.7.57) ======= */
        #authContainer.hidden {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            height: 0 !important;
            overflow: hidden !important;
            pointer-events: none !important;
        }

        #app.hidden {
            display: none !important;
        }

        /* ====================================== */
        
        .z-\[60\] { z-index: 60 !important; }
        .z-\[70\] { z-index: 70 !important; }
        .z-\[80\] { z-index: 80 !important; }
        .z-\[100\] { z-index: 100 !important; }
        .z-\[200\] { z-index: 200 !important; } /* Camada Suprema para Bloqueios */
        
        .modal-enter { animation: modalFadeIn 0.2s ease-out forwards; }
        @keyframes modalFadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .toast-enter { animation: toastSlideIn 0.3s ease-out forwards; }
        @keyframes toastSlideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Estilo do Toggle Switch para o Admin */
        .toggle-checkbox:checked {
            right: 0;
            border-color: #ef4444;
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: #ef4444;
        }
    </style>
</head>
<body class="antialiased text-gray-800 bg-slate-50">

    <div id="authContainer" class="flex items-center justify-center min-h-screen bg-slate-50 transition-all duration-300">
        <div class="w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-md">
            <form id="loginForm">
                <div class="flex justify-center mb-4">
                     <img src="https://i.ibb.co/jkT6MKqr/logo-paglucro-gestor.png" alt="Logo" class="h-16 w-auto">
                </div>
                <h2 class="text-2xl font-bold text-center text-gray-900">PagLucro Gestor</h2>
                <p class="text-center text-gray-500 text-sm">Fa√ßa login para continuar</p>
                
                <div class="mt-6 space-y-4">
                    <div>
                        <label for="loginEmail" class="sr-only">E-mail</label>
                        <input type="email" id="loginEmail" placeholder="E-mail" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition" required>
                    </div>
                    <div>
                        <label for="loginPassword" class="sr-only">Senha</label>
                        <input type="password" id="loginPassword" placeholder="Senha" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition" required>
                    </div>
                </div>
                
                <button type="submit" class="w-full px-4 py-3 mt-6 font-bold text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 transition shadow-lg transform active:scale-95">
                    Entrar no Sistema
                </button>
                
                 <div class="mt-4 text-center">
                    <a href="#" id="forgotPasswordBtn" class="text-sm font-medium text-blue-600 hover:text-blue-800 transition">Esqueci minha senha</a>
                </div>
            </form>
        </div>
    </div>

    <div id="app" class="hidden">
        <header class="bg-white shadow-sm border-b border-slate-200 sticky top-0 z-40">
            <div class="w-full mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
                <div class="flex items-center">
                    <img src="https://i.ibb.co/jkT6MKqr/logo-paglucro-gestor.png" alt="Logo" class="h-8 w-auto mr-3">
                    <h1 class="text-xl font-bold text-gray-900 hidden sm:block">PagLucro Gestor</h1>
                </div>
                <div class="flex items-center gap-3 sm:gap-4">
                    <button id="adminPanelBtn" class="hidden bg-purple-600 text-white font-bold py-2 px-3 rounded-lg hover:bg-purple-700 transition flex items-center justify-center shadow-md border border-purple-500 animate-pulse" title="Painel Administrativo">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                        </svg>
                        Admin
                    </button>

                    <button id="priceTableBtn" class="bg-gray-100 text-gray-700 font-semibold py-2 px-3 rounded-lg hover:bg-gray-200 transition flex items-center justify-center border border-gray-200" title="Tabela de Pre√ßos">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a1 1 0 011-1h5a1 1 0 01.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
                        </svg>
                    </button>
                    <button id="addOrderBtn" class="bg-blue-600 text-white font-semibold py-2 px-3 sm:px-4 rounded-lg shadow-md hover:bg-blue-700 transition flex items-center justify-center text-sm sm:text-base">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 sm:mr-2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
                        <span class="hidden sm:inline">Novo Pedido</span>
                    </button>
                    <div class="relative" id="userMenuContainer">
                        <button id="userMenuBtn" class="flex items-center gap-2 text-sm font-medium text-gray-600 hover:text-gray-900 bg-gray-50 py-1 px-2 rounded-full border hover:bg-white transition">
                            <span id="userEmail" class="hidden md:inline max-w-[150px] truncate">Usuario</span>
                            <div class="bg-gray-200 rounded-full p-1">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-gray-500"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-5.5-2.5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zM10 12a5.99 5.99 0 00-4.793 2.39A6.483 6.483 0 0010 16.5a6.483 6.483 0 004.793-2.11A5.99 5.99 0 0010 12z" clip-rule="evenodd" /></svg>
                            </div>
                        </button>
                        
                        <div id="userDropdown" class="absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-xl z-50 hidden ring-1 ring-black ring-opacity-5 border border-gray-100 transform origin-top-right transition-all">
                            
                            <a href="#" id="companySettingsBtn" class="flex items-center gap-2 block px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 first:rounded-t-lg font-medium">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                </svg>
                                Configura√ß√µes da Empresa
                            </a>
                            <div class="border-t border-gray-100"></div>
                            <a href="#" id="financeDashboardBtn" class="flex items-center gap-3 block px-4 py-3 text-sm text-gray-700 hover:bg-gray-50"></a>
                            <div class="border-t border-gray-100"></div>
                            <a href="#" id="backupBtn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">Fazer Backup Manual</a>
                            <label for="restoreFile" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 cursor-pointer">Importar Backup</label>
                            <input type="file" id="restoreFile" class="hidden" accept=".json">
                            <a href="#" id="toggleViewBtn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">Ver Entregues</a>
                            <div class="border-t border-gray-100"></div>
                            <a href="#" id="requestDeletionBtn" class="block px-4 py-2 text-sm text-yellow-700 hover:bg-yellow-50">Solicitar Exclus√£o de Conta</a>
                            <div class="border-t border-gray-100"></div>
                            <a href="#" id="logoutBtn" class="block px-4 py-3 text-sm text-red-600 hover:bg-red-50 font-semibold last:rounded-b-lg">Sair do Sistema</a>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main id="mainContent" class="w-full mx-auto p-4 sm:p-6 lg:px-8 max-w-7xl pb-32">
            
            <div id="searchContainer" class="mb-6 relative">
                <div class="relative">
                    <input type="text" id="globalSearchInput" placeholder="üîç Buscar por cliente, telefone ou ID..." class="w-full p-3 pl-10 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all text-sm">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                         </div>
                    <button id="clearSearchBtn" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 hidden">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" /></svg>
                    </button>
                </div>
                
                <div id="searchResultsContainer" class="hidden mt-4 space-y-6">
                    <div id="resultsPendingWrapper" class="hidden">
                        <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wide mb-2 pl-1 border-l-4 border-yellow-400">Em Pendentes (A Fazer)</h3>
                        <div id="resultsPendingList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"></div>
                    </div>
                    <div id="resultsDeliveredWrapper" class="hidden">
                        <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wide mb-2 pl-1 border-l-4 border-green-500">Em Entregues (Hist√≥rico)</h3>
                        <div id="resultsDeliveredList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"></div>
                    </div>
                    <div id="noResultsMessage" class="hidden text-center py-8 text-gray-500 italic">
                        Nenhum pedido encontrado para sua busca.
                    </div>
                </div>
            </div>
            <div id="ordersDashboard">
                <div id="ordersList">
                    <div id="loadingIndicator" class="flex flex-col items-center justify-center py-20 text-gray-400">
                        <svg class="animate-spin h-10 w-10 mb-4 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <p>Carregando seus pedidos...</p>
                    </div>
                </div>
            </div>
            
            <div id="financeDashboard" class="hidden">
                <div class="mb-6 flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center">
                    <h2 class="text-2xl font-bold text-gray-800">Vis√£o Financeira</h2>
                    <div class="flex flex-wrap items-center gap-2 sm:gap-4 w-full sm:w-auto">
                        <div id="customPeriodContainer" class="hidden flex items-center gap-2 bg-white p-1 rounded border">
                            <input type="date" id="startDateInput" class="p-1 border-none text-sm focus:ring-0">
                            <span class="text-gray-400 text-xs">at√©</span>
                            <input type="date" id="endDateInput" class="p-1 border-none text-sm focus:ring-0">
                        </div>
                        <select id="periodFilter" class="p-2 border rounded-lg bg-white shadow-sm text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="thisMonth">Este M√™s</option>
                            <option value="lastMonth">M√™s Passado</option>
                            <option value="thisYear">Este Ano</option>
                            <option value="custom">Per√≠odo Personalizado</option>
                        </select>
                        <button id="copyReportBtn" class="bg-white border border-gray-300 text-gray-700 font-medium py-2 px-4 rounded-lg hover:bg-gray-50 text-sm flex items-center gap-2 shadow-sm transition" title="Copiar para Excel">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600" viewBox="0 0 20 20" fill="currentColor"><path d="M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z" /><path d="M5 3a2 2 0 00-2 2v6a1 1 0 102 0V5h6a1 1 0 100-2H5z" /></svg>
                            Copiar
                        </button>
                    </div>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-8">
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex flex-col justify-between h-full">
                        <h3 class="text-xs font-bold uppercase tracking-wider text-green-600 mb-1">Faturamento Bruto</h3>
                        <p id="faturamentoBruto" class="text-xl lg:text-2xl font-bold text-gray-800">R$ 0,00</p>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex flex-col justify-between h-full">
                        <h3 class="text-xs font-bold uppercase tracking-wider text-red-600 mb-1">Despesas</h3>
                        <p id="despesasTotais" class="text-xl lg:text-2xl font-bold text-gray-800">R$ 0,00</p>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex flex-col justify-between h-full ring-1 ring-blue-100">
                        <h3 class="text-xs font-bold uppercase tracking-wider text-blue-600 mb-1">Lucro L√≠quido</h3>
                        <p id="lucroLiquido" class="text-xl lg:text-2xl font-bold text-blue-700">R$ 0,00</p>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex flex-col justify-between h-full bg-yellow-50/50">
                        <h3 class="text-xs font-bold uppercase tracking-wider text-yellow-700 mb-1">A Receber (Pendentes)</h3>
                        <p id="contasAReceber" class="text-xl lg:text-2xl font-bold text-yellow-800">R$ 0,00</p>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex flex-col justify-between h-full relative group">
                         <button id="adjustBalanceBtn" class="absolute top-2 right-2 text-gray-300 hover:text-indigo-600 transition opacity-0 group-hover:opacity-100" title="Ajustar Saldo Inicial">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" /><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" /></svg>
                        </button>
                        <h3 class="text-xs font-bold uppercase tracking-wider text-indigo-600 mb-1">Saldo Banco</h3>
                        <p id="saldoEmConta" class="text-xl lg:text-2xl font-bold text-indigo-900">R$ 0,00</p>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex flex-col justify-between h-full">
                        <h3 class="text-xs font-bold uppercase tracking-wider text-gray-500 mb-1">Saldo Caixa</h3>
                        <p id="saldoEmCaixa" class="text-xl lg:text-2xl font-bold text-gray-800">R$ 0,00</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                        <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wide mb-4 border-b pb-2">Top Despesas</h3>
                        <div id="topExpensesByCategory" class="space-y-3">
                            <p class="text-sm text-gray-400 italic text-center py-4">Nenhum dado no per√≠odo.</p>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                        <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wide mb-4 border-b pb-2">Top Receitas</h3>
                        <div id="topIncomesByCategory" class="space-y-3">
                            <p class="text-sm text-gray-400 italic text-center py-4">Nenhum dado no per√≠odo.</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden">
                    <div class="p-6 border-b border-slate-100 flex flex-col sm:flex-row justify-between items-center gap-4">
                        <h3 class="text-lg font-bold text-gray-800">Extrato de Lan√ßamentos</h3>
                        <div class="flex gap-2 w-full sm:w-auto">
                            <button id="addIncomeBtn" class="flex-1 sm:flex-none bg-green-50 text-green-700 border border-green-200 font-semibold py-2 px-4 rounded-lg hover:bg-green-100 text-sm transition">+ Entrada</button>
                            <button id="addExpenseBtn" class="flex-1 sm:flex-none bg-red-50 text-red-700 border border-red-200 font-semibold py-2 px-4 rounded-lg hover:bg-red-100 text-sm transition">- Despesa</button>
                        </div>
                    </div>
                    
                    <div class="p-4 bg-gray-50 border-b border-slate-100">
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <svg class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" /></svg>
                            </span>
                            <input type="text" id="transactionSearchInput" placeholder="Buscar lan√ßamentos..." class="pl-10 w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                        </div>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm">
                            <thead class="bg-gray-50 text-gray-500 font-medium">
                                <tr>
                                    <th class="py-3 px-4">Data</th>
                                    <th class="py-3 px-4">Descri√ß√£o</th>
                                    <th class="py-3 px-4">Categoria</th>
                                    <th class="py-3 px-4">Origem</th>
                                    <th class="py-3 px-4 text-right">Valor</th>
                                    <th class="py-3 px-4 text-right">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="transactionsList" class="divide-y divide-slate-100"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>

        <div id="fabBackdrop" class="fixed inset-0 z-[85] hidden cursor-default"></div>

    <div id="fabMenu" class="fixed bottom-24 right-6 z-[90] flex flex-col items-end gap-3 hidden">
        
        <div class="flex items-center gap-2 group cursor-pointer" onclick="document.getElementById('addExpenseBtn').click()">
            <span class="bg-gray-800 text-white text-xs font-medium py-1 px-3 rounded shadow-lg">Nova Despesa</span>
            <div class="bg-red-500 text-white p-3 rounded-full shadow-lg hover:scale-105 transition-transform border-2 border-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" /></svg>
            </div>
        </div>

        <div class="flex items-center gap-2 group cursor-pointer" onclick="document.getElementById('addIncomeBtn').click()">
            <span class="bg-gray-800 text-white text-xs font-medium py-1 px-3 rounded shadow-lg">Nova Receita</span>
            <div class="bg-green-500 text-white p-3 rounded-full shadow-lg hover:scale-105 transition-transform border-2 border-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" /></svg>
            </div>
        </div>

        <div class="flex items-center gap-2 group cursor-pointer" onclick="document.getElementById('addOrderBtn').click()">
            <span class="bg-gray-800 text-white text-xs font-medium py-1 px-3 rounded shadow-lg">Novo Pedido</span>
            <div class="bg-blue-600 text-white p-3 rounded-full shadow-lg hover:scale-105 transition-transform border-2 border-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
            </div>
        </div>
    </div>

    <button id="fabMainBtn" class="fixed bottom-6 right-6 z-[100] bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-full shadow-2xl transition-transform active:scale-95 w-14 h-14 flex items-center justify-center ring-4 ring-blue-50">
        <svg id="fabIconPlus" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" /></svg>
        <svg id="fabIconClose" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 absolute opacity-0 transition-opacity duration-300 transform rotate-90" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
    </button>

        <button id="fabRestoreBtn" onclick="toggleFab(true)" class="fixed bottom-8 right-0 z-[80] bg-blue-600/50 hover:bg-blue-600 text-white p-2 rounded-l-lg shadow-md transition-all duration-300 translate-x-full" title="Mostrar A√ß√µes R√°pidas">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
            </svg>
        </button>

        <script>
            function toggleFab(show) {
                const fab = document.getElementById('fabContainer');
                const restore = document.getElementById('fabRestoreBtn');
                if (show) {
                    fab.classList.remove('hidden');
                    restore.classList.add('translate-x-full'); 
                } else {
                    fab.classList.add('hidden');
                    restore.classList.remove('translate-x-full');
                }
            }
        </script>

    </div>
    
    <div id="adminModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 backdrop-blur-sm flex items-center justify-center p-4 z-[100] hidden modal-enter">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col overflow-hidden">
            <div class="p-6 bg-gray-800 text-white flex justify-between items-center">
                <div>
                    <h3 class="text-2xl font-bold flex items-center gap-2">
                        üëë SaaS Manager
                    </h3>
                    <p class="text-gray-400 text-sm mt-1">Gerenciamento de Assinantes e Acessos</p>
                </div>
                <button id="closeAdminModalBtn" class="text-gray-400 hover:text-white text-2xl hover:bg-gray-700 w-10 h-10 rounded-full flex items-center justify-center transition">&times;</button>
            </div>
            
            <div class="flex-1 overflow-auto bg-gray-50 p-6">
                <div class="flex flex-col sm:flex-row gap-4 mb-6 justify-between items-center">
                    <div class="flex flex-wrap items-center gap-2 w-full sm:w-auto">
                        <div class="relative w-full sm:w-80">
                            <input type="text" id="adminSearchInput" placeholder="Buscar empresa ou email..." class="w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none">
                            <svg class="w-5 h-5 text-gray-400 absolute left-3 top-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                        </div>
                        <a href="https://console.firebase.google.com/u/0/project/_/authentication/users" target="_blank" class="bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 flex items-center gap-2 shadow-sm text-sm border border-gray-300 transition" title="1¬∫ Passo: Criar Email/Senha no Firebase">
                            üîó Abrir Firebase
                        </a>
                        <button id="btnCreateCompany" class="bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 flex items-center gap-2 shadow-sm whitespace-nowrap text-sm transition">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" /></svg>
                            Nova Empresa
                        </button>
                    </div>
                    <button id="adminRefreshBtn" class="bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 flex items-center gap-2 font-medium">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
                        Atualizar
                    </button>
                </div>

                <div class="bg-white rounded-xl shadow border border-gray-200 overflow-hidden">
                    <table class="w-full text-left border-collapse">
                        <thead class="bg-gray-100 text-gray-600 text-xs uppercase font-bold tracking-wider">
                            <tr>
                                <th class="p-4 border-b">Empresa / Email</th>
                                <th class="p-4 border-b">Acesso / Cria√ß√£o</th>
                                <th class="p-4 border-b">Assinatura / Vencimento</th>
                                <th class="p-4 border-b text-center">Status</th>
                                <th class="p-4 border-b">Mensagem</th>
                                <th class="p-4 border-b text-right">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="adminUsersList" class="divide-y divide-gray-100 text-sm">
                            <tr>
                                <td colspan="6" class="p-8 text-center text-gray-400 italic">Carregando usu√°rios...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <div id="adminClientModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 backdrop-blur-sm flex items-center justify-center p-4 z-[110] hidden modal-enter">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden border border-gray-200">
            <div class="p-6 bg-gray-50 border-b flex justify-between items-start">
                <div>
                    <h3 class="text-xl font-bold text-gray-800" id="detailCompanyName">Carregando...</h3>
                    <div class="text-sm text-gray-500 mt-1 flex flex-col gap-1">
                        <span id="detailCompanyEmail">email@exemplo.com</span>
                        <span class="font-mono text-xs bg-gray-200 px-1 rounded w-fit select-all" id="detailCompanyId">UID...</span>
                    </div>
                </div>
                <button id="closeClientDetailsBtn" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
            </div>

            <div class="flex-1 overflow-auto p-6 flex flex-col md:flex-row gap-6">
                <div class="flex-1">
                    <h4 class="text-sm font-bold text-gray-600 uppercase tracking-wide mb-3 flex items-center gap-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        Hist√≥rico Financeiro
                    </h4>
                    <div class="bg-white border rounded-lg overflow-hidden shadow-sm">
                        <table class="w-full text-left">
                            <thead class="bg-gray-100 text-xs text-gray-500 uppercase font-semibold">
                                <tr>
                                    <th class="p-3 border-b">Data</th>
                                    <th class="p-3 border-b">Valor</th>
                                    <th class="p-3 border-b">Ref</th>
                                    <th class="p-3 border-b text-right">Resp.</th>
                                </tr>
                            </thead>
                            <tbody id="detailHistoryList" class="divide-y divide-gray-100 text-sm">
                                <tr><td colspan="4" class="p-4 text-center text-gray-400 text-xs">Nenhum registro.</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="w-full md:w-1/3 flex flex-col">
                    <div class="flex justify-between items-center mb-2">
                        <h4 class="text-sm font-bold text-gray-600 uppercase tracking-wide flex items-center gap-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                            Notas Internas
                        </h4>
                        <span id="notesSaveStatus" class="text-xs text-gray-400"></span>
                    </div>
                    <textarea id="detailInternalNotes" class="flex-1 w-full border border-yellow-200 bg-yellow-50 rounded-lg p-4 text-sm text-gray-700 focus:ring-2 focus:ring-yellow-400 outline-none resize-none shadow-inner" placeholder="Escreva observa√ß√µes sobre este cliente aqui... (Salva automaticamente)"></textarea>
                </div>
            </div>
        </div>
    </div>
    
    <div id="blockedModal" class="fixed inset-0 bg-red-900 z-[200] hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 text-center border-4 border-red-500">
            <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                </svg>
            </div>
            <h2 class="text-3xl font-bold text-gray-900 mb-2">Acesso Bloqueado</h2>
            <p id="blockedMessage" class="text-gray-600 mb-8 leading-relaxed">
                Sua assinatura encontra-se vencida ou suspensa.<br>
                Para regularizar e liberar seu acesso imediatamente, entre em contato com o suporte.
            </p>
            <div class="space-y-3">
                <a href="https://wa.me/5583991025643?text=Ol√°, meu acesso est√° bloqueado e gostaria de regularizar." target="_blank" class="block w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-xl transition shadow-lg flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-8.683-2.031-9.676-.272-.099-.47-.149-.734-.149-.124 0-.198.025-.297.049s-.223.124-.347.273c-.124.149-.47.595-.47 1.438 0 .843.595 1.661.693 1.81.099.149 2.156 3.497 5.275 4.876.57.248 1.041.446 1.438.57.693.198 1.487.149 1.932-.05.595-.272 1.758-1.09 2.006-1.783.248-.693.248-1.338.174-1.462z"/></svg>
                    Falar no WhatsApp
                </a>
                <button onclick="location.reload()" class="block w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 px-4 rounded-xl transition">
                    Tentar Novamente
                </button>
                <button id="blockedLogoutBtn" class="text-sm text-red-400 hover:text-red-600 mt-4 underline">Sair da conta</button>
            </div>
        </div>
    </div>

    <div id="paymentWarningModal" class="fixed inset-0 bg-gray-900 bg-opacity-80 z-[100] hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 border-l-8 border-yellow-400 relative">
            <button onclick="document.getElementById('paymentWarningModal').classList.add('hidden')" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <h3 class="text-xl font-bold text-gray-900 flex items-center gap-2 mb-2">
                <span class="text-2xl">‚ö†Ô∏è</span> Aten√ß√£o Financeira
            </h3>
            <p class="text-gray-600 mb-6">
                Sua fatura venceu recentemente. Evite o bloqueio do sistema regularizando seu pagamento nos pr√≥ximos dias.
            </p>
            <div class="flex justify-end gap-3">
                <button onclick="document.getElementById('paymentWarningModal').classList.add('hidden')" class="bg-yellow-100 hover:bg-yellow-200 text-yellow-800 font-semibold py-2 px-4 rounded-lg transition">
                    Entendi, vou verificar
                </button>
            </div>
        </div>
    </div>

    <div id="priceTableModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 backdrop-blur-sm flex items-center justify-center p-4 z-50 hidden modal-enter">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col">
            <div class="p-6 border-b">
                <h3 id="priceTableModalTitle" class="text-2xl font-bold text-gray-800">Tabela de Pre√ßos</h3>
            </div>
            <div id="priceTableContainer" class="p-6 overflow-y-auto bg-slate-50"></div>
            <div id="priceTableFooter" class="p-4 bg-white border-t flex flex-wrap justify-end items-center gap-3">
                <div id="priceTableEditMessage" class="text-sm text-blue-600 bg-blue-50 px-3 py-1 rounded-full mr-auto hidden font-medium">Modo de Edi√ß√£o Ativo</div>
                <button id="editPriceTableBtn" class="bg-white border border-gray-300 text-gray-700 font-semibold py-2 px-4 rounded-lg hover:bg-gray-50">Editar Tabela</button>
                <button id="addPriceItemBtn" class="bg-green-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-700 shadow-sm hidden">+ Item</button>
                <button id="savePriceTableBtn" class="bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 shadow-sm hidden">Salvar</button>
                <button id="cancelPriceTableBtn" class="bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 hidden">Cancelar</button>
                <button id="closePriceTableBtn" class="text-gray-500 hover:text-gray-800 font-semibold py-2 px-4">Fechar</button>
            </div>
        </div>
    </div>

    <div id="backupReminderBanner" class="hidden fixed bottom-5 right-5 w-full max-w-sm bg-white rounded-xl shadow-2xl p-0 border border-blue-100 overflow-hidden z-[100] transform transition-all duration-500">
        <div class="bg-blue-50 p-4 flex items-start gap-3">
            <div class="bg-blue-100 p-2 rounded-full text-blue-600">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            </div>
            <div class="flex-1">
                <h4 class="text-sm font-bold text-gray-900">Seguran√ßa dos Dados</h4>
                <p class="text-sm text-gray-600 mt-1 leading-relaxed">H√° mais de 7 dias voc√™ n√£o faz backup. Evite perder tudo!</p>
            </div>
        </div>
        <div class="bg-white p-3 flex gap-2 justify-end border-t border-blue-50">
            <button id="dismissBackupReminderBtn" class="text-gray-500 font-medium py-1 px-3 rounded hover:bg-gray-100 text-sm">Lembrar Depois</button>
            <button id="backupNowBtn" class="bg-blue-600 text-white font-semibold py-1 px-4 rounded-lg text-sm hover:bg-blue-700 shadow-sm">Fazer Backup</button>
        </div>
    </div>

    <div id="orderModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 backdrop-blur-sm flex items-center justify-center p-4 z-50 hidden modal-enter">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-5xl max-h-[95vh] overflow-y-auto">
            <form id="orderForm" class="p-6 sm:p-8 space-y-6">
                <div class="flex justify-between items-center border-b pb-4">
                    <h2 id="modalTitle" class="text-2xl font-bold text-gray-800">Novo Pedido</h2>
                    <button type="button" id="closeOrderModalX" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                </div>
                <input type="hidden" id="orderId">
                <fieldset class="border border-gray-200 p-4 rounded-lg bg-gray-50/50">
                    <legend class="text-sm font-bold text-blue-600 px-2 uppercase tracking-wide">1. Cliente & Prazo</legend>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-12 gap-4 mt-2">
                        <div class="lg:col-span-4">
                             <label class="text-xs font-semibold text-gray-500 block mb-1">Nome do Cliente</label>
                            <input type="text" id="clientName" class="p-2 border rounded-md w-full focus:ring-2 focus:ring-blue-500 outline-none" required>
                        </div>
                        <div class="lg:col-span-3">
                            <label class="text-xs font-semibold text-gray-500 block mb-1">Telefone</label>
                            <input type="text" id="clientPhone" class="p-2 border rounded-md w-full focus:ring-2 focus:ring-blue-500 outline-none" maxlength="15">
                        </div>
                        <div class="lg:col-span-2">
                             <label class="text-xs font-semibold text-gray-500 block mb-1">Status</label>
                             <select id="orderStatus" class="p-2 border rounded-md w-full bg-white focus:ring-2 focus:ring-blue-500 outline-none">
    <option value="Pendente">Pendente</option>
    <option value="Altera√ß√£o Solicitada">Altera√ß√£o Solicitada</option> <option value="Aguardando Aprova√ß√£o">Aguardando Aprova√ß√£o</option> <option value="Confirmado">Confirmado</option>
    <option value="Em Produ√ß√£o">Em Produ√ß√£o</option>
    <option value="Finalizado">Finalizado</option>
    <option value="Entregue">Entregue</option>
</select>
                        </div>
                        <div class="lg:col-span-3 grid grid-cols-2 gap-2">
                            <div>
                                <label for="orderDate" class="text-xs font-semibold text-gray-500 block mb-1">Data Pedido</label>
                                <input type="date" id="orderDate" class="p-2 border rounded-md w-full text-sm">
                            </div>
                            <div>
                                <label for="deliveryDate" class="text-xs font-semibold text-gray-500 block mb-1">Data Entrega</label>
                                <input type="date" id="deliveryDate" class="p-2 border rounded-md w-full text-sm">
                            </div>
                        </div>
                    </div>
                </fieldset>
                
                <fieldset class="border border-gray-200 p-4 rounded-lg bg-white">
                    <legend class="text-sm font-bold text-blue-600 px-2 uppercase tracking-wide">2. Arquivos (Mockup)</legend>
                    <div class="mt-2 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:bg-gray-50 transition text-center">
                        <input type="file" id="mockupFiles" class="hidden" accept="image/*" multiple onchange="document.getElementById('fileCount').innerText = this.files.length + ' arquivo(s) selecionado(s)'">
                        <label for="mockupFiles" class="cursor-pointer flex flex-col items-center justify-center">
                            <svg class="w-8 h-8 text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                            <span class="text-sm text-blue-600 font-semibold">Clique para enviar imagens</span>
                            <span id="fileCount" class="text-xs text-gray-500 mt-1">Nenhum arquivo selecionado</span>
                        </label>
                    </div>
                    <div id="existingFilesContainer" class="flex flex-wrap gap-2 mt-3"></div>
                </fieldset>

                <fieldset class="border border-gray-200 p-4 rounded-lg bg-gray-50/50">
                    <legend class="text-sm font-bold text-blue-600 px-2 uppercase tracking-wide">3. Pe√ßas e Tamanhos</legend>
                    <div id="partsContainer" class="space-y-6"></div>
                    <button type="button" id="addPartBtn" class="mt-4 w-full bg-white border-2 border-dashed border-gray-300 text-gray-600 font-semibold py-3 px-4 rounded-lg hover:border-blue-500 hover:text-blue-600 transition flex items-center justify-center gap-2">
                        <span class="text-xl font-bold">+</span> Adicionar Nova Pe√ßa
                    </button>
                </fieldset>

                <fieldset class="border border-gray-200 p-4 rounded-lg bg-white">
                    <legend class="text-sm font-bold text-blue-600 px-2 uppercase tracking-wide">4. Observa√ß√µes</legend>
                    <textarea id="generalObservation" class="w-full p-3 border rounded-md mt-2 focus:ring-2 focus:ring-blue-500 outline-none bg-gray-50" rows="3" placeholder="Detalhes gerais do pedido..."></textarea>
                </fieldset>
                
                <fieldset class="border border-gray-200 p-4 rounded-lg bg-blue-50/30">
                    <legend class="text-sm font-bold text-green-600 px-2 uppercase tracking-wide">5. Fechamento Financeiro</legend>
                    
                    <div id="financialsContainer" class="space-y-2 mb-4 bg-white p-4 rounded-lg shadow-sm border border-gray-100"></div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 border-t border-gray-200 pt-6 mt-4">
                        <div class="col-span-1 md:col-span-2">
                            <label class="text-xs font-bold text-gray-500 uppercase mb-2 block">Adiantamento / Sinal</label>
                            <div class="bg-white p-3 rounded-lg border flex flex-col gap-3">
                                <div class="flex items-center gap-2">
                                     <span class="text-gray-500 text-sm font-bold">R$</span>
                                     <input type="number" step="0.01" id="downPayment" class="flex-1 p-1 border-b border-gray-300 focus:border-blue-500 outline-none bg-transparent font-semibold" placeholder="0.00">
                                </div>
                                <div class="flex gap-2 text-xs">
                                    <input type="date" id="downPaymentDate" class="border rounded p-1 bg-gray-50">
                                    <select id="downPaymentSource" class="border rounded p-1 bg-gray-50 flex-1 source-selector-dummy">
                                        <option value="banco">Banco</option>
                                        <option value="caixa">Caixa</option>
                                    </select>
                                </div>
                                <div class="flex gap-4 mt-1">
                                    <label class="flex items-center cursor-pointer"><input type="radio" name="downPaymentStatus" value="pago" checked class="text-green-600 focus:ring-green-500"><span class="ml-2 text-xs font-medium">Recebido</span></label>
                                    <label class="flex items-center cursor-pointer"><input type="radio" name="downPaymentStatus" value="a_receber" class="text-orange-500 focus:ring-orange-500"><span class="ml-2 text-xs font-medium">A Receber</span></label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex flex-col justify-end">
                            <label for="discount" class="text-xs font-semibold text-gray-500 mb-1">Desconto (R$)</label>
                            <div class="flex items-center relative">
                                <span class="text-gray-500 absolute left-3">R$</span>
                                <input type="number" step="0.01" id="discount" class="p-2 border rounded-md w-full pl-10 bg-white focus:ring-2 focus:ring-blue-500 outline-none">
                            </div>
                        </div>

                        <div class="flex flex-col gap-2 justify-end">
                            <div class="flex justify-between items-end border-b border-dashed border-gray-300 pb-1">
                                <span class="text-sm text-gray-600">Total Bruto</span>
                                <span id="grandTotal" class="text-lg font-bold text-gray-800">R$ 0,00</span>
                            </div>
                            <div class="flex justify-between items-end bg-red-50 p-2 rounded border border-red-100">
                                <span class="text-sm font-bold text-red-700">A Pagar</span>
                                <span id="remainingTotal" class="text-xl font-bold text-red-600">R$ 0,00</span>
                            </div>
                        </div>
                    </div>
                    <div id="downPaymentSourceContainer" class="hidden">
                         <button type="button" class="source-selector" data-source="banco"></button>
                         <button type="button" class="source-selector" data-source="caixa"></button>
                    </div>
                </fieldset>
                
                <div class="flex flex-col sm:flex-row justify-end gap-4 mt-8 pt-4 border-t">
                    <div id="uploadIndicator" class="flex items-center text-blue-600 font-semibold hidden animate-pulse">
                        <svg class="animate-spin -ml-1 mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                        Salvando...
                    </div>
                    <button type="button" id="cancelBtn" class="bg-white border border-gray-300 text-gray-700 font-semibold py-3 px-6 rounded-lg hover:bg-gray-50 transition">Cancelar</button>
                    <button type="submit" id="saveBtn" class="bg-green-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-green-700 shadow-lg transform active:scale-95 transition">Salvar Pedido</button>
                </div>
            </form>
        </div>
    </div>

    <div id="viewModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50 hidden modal-enter"></div>
    <div id="infoModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-[80] hidden modal-enter">
        <div class="bg-white rounded-xl shadow-2xl p-6 max-w-sm w-full text-center">
            <div class="mb-4 text-blue-500 mx-auto w-12 h-12 flex items-center justify-center bg-blue-100 rounded-full">‚ÑπÔ∏è</div>
            <p id="infoModalMessage" class="text-lg font-medium text-gray-800 mb-6"></p>
            <button id="infoModalCloseBtn" class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 font-semibold">OK, Entendi</button>
        </div>
    </div>
    <div id="idleModal" class="fixed inset-0 bg-gray-900 bg-opacity-90 backdrop-blur-sm flex items-center justify-center p-4 z-[60] hidden modal-enter">
        <div class="bg-white rounded-xl shadow-2xl p-8 max-w-sm w-full text-center">
            <h3 class="text-xl font-bold mb-2 text-gray-900">Voc√™ ainda est√° a√≠?</h3>
            <p class="text-gray-600 mb-6">Sua sess√£o vai expirar em <span id="countdownTimer" class="font-bold text-red-600 text-xl">60</span>s.</p>
            <button id="stayLoggedInBtn" class="w-full bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-700 transition">Continuar Trabalhando</button>
        </div>
    </div>
    <div id="optionsModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-[60] hidden modal-enter">
        <div class="bg-white rounded-xl shadow-2xl p-6 max-w-md w-full">
            <h3 id="optionsModalTitle" class="text-xl font-bold mb-4">Gerenciar Op√ß√µes</h3>
            <div id="optionsList" class="space-y-2 max-h-60 overflow-y-auto mb-4 bg-gray-50 p-2 rounded"></div>
            <div class="flex gap-2 items-center border-t pt-4">
                <input type="text" id="newOptionInput" class="flex-grow p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none" placeholder="Nova op√ß√£o...">
                <button id="addOptionBtn" class="bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700">Adicionar</button>
            </div>
            <button id="closeOptionsModalBtn" class="mt-4 w-full text-gray-500 hover:text-gray-800 py-2">Fechar</button>
        </div>
    </div>
    <div id="confirmModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-[70] hidden modal-enter">
        <div class="bg-white rounded-xl shadow-2xl p-8 max-w-sm w-full text-center">
            <div class="mx-auto w-12 h-12 bg-red-100 text-red-500 rounded-full flex items-center justify-center mb-4">‚ö†Ô∏è</div>
            <h3 class="text-xl font-bold mb-2">Tem certeza?</h3>
            <p id="confirmModalMessage" class="text-gray-600 mb-6">Essa a√ß√£o n√£o pode ser desfeita.</p>
            <div class="flex justify-center gap-3">
                <button id="confirmCancelBtn" class="flex-1 bg-white border border-gray-300 text-gray-700 font-semibold py-2 px-4 rounded-lg hover:bg-gray-50">Cancelar</button>
                <button id="confirmOkBtn" class="flex-1 bg-red-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-red-700">Sim, Excluir</button>
            </div>
        </div>
    </div>

    <div id="settlementModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-[70] hidden modal-enter">
        <div class="bg-white rounded-xl shadow-2xl p-8 max-w-sm w-full">
            <h3 class="text-xl font-bold mb-6 text-center">Quitar Pedido</h3>
            <input type="hidden" id="settlementOrderId">
            
            <div class="space-y-4">
                <div class="bg-blue-50 p-4 rounded-lg text-center">
                    <span class="text-xs font-bold text-blue-600 uppercase tracking-wide">Valor Restante</span>
                    <p id="settlementAmountDisplay" class="text-3xl font-bold text-blue-700 mt-1">R$ 0,00</p>
                </div>

                <div>
                    <label for="settlementDate" class="text-sm font-semibold text-gray-700">Data do Pagamento</label>
                    <input type="date" id="settlementDate" class="p-2 border rounded-md w-full mt-1" required>
                </div>
                
                <div>
                    <label class="text-sm font-semibold text-gray-700">Entrou em:</label>
                    <div id="settlementSourceContainer" class="flex gap-3 mt-2">
                        <button type="button" class="source-selector flex-1 flex flex-col items-center justify-center gap-1 p-2 border rounded-lg hover:bg-gray-50 transition" data-source="banco">
                            <span class="icon-placeholder w-4 h-4 bg-gray-300 rounded-full"></span>
                            <span class="text-sm font-medium">Banco</span>
                        </button>
                        <button type="button" class="source-selector flex-1 flex flex-col items-center justify-center gap-1 p-2 border rounded-lg hover:bg-gray-50 transition" data-source="caixa">
                            <span class="icon-placeholder w-4 h-4 bg-gray-300 rounded-full"></span>
                            <span class="text-sm font-medium">Caixa</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="flex justify-end gap-3 mt-8">
                <button type="button" id="settlementCancelBtn" class="bg-gray-100 text-gray-700 font-semibold py-2 px-4 rounded-lg hover:bg-gray-200">Cancelar</button>
                <button type="button" id="settlementConfirmBtn" class="bg-green-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-green-700 shadow-md">Confirmar Pagamento</button>
            </div>
        </div>
    </div>
    
    <div id="initialBalanceModal" class="hidden fixed inset-0 bg-gray-900/75 flex items-center justify-center z-[70]"><div class="bg-white p-6 rounded-lg w-80"><h3 class="font-bold text-lg">Saldo Inicial</h3><input id="initialBalanceInput" type="number" class="w-full border p-2 mt-2 rounded"><div class="mt-4 flex justify-end gap-2"><button id="cancelBalanceBtn" class="px-4 py-2 bg-gray-200 rounded">Cancelar</button><button id="saveBalanceBtn" class="px-4 py-2 bg-blue-600 text-white rounded">Salvar</button></div></div></div>
    
    <div id="transactionModal" class="hidden fixed inset-0 bg-gray-900/75 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg w-full max-w-md">
            <h3 id="transactionModalTitle" class="font-bold mb-4">Lan√ßamento</h3>
            <form id="transactionForm" class="space-y-3">
                <input type="hidden" id="transactionId">
                <input type="hidden" id="transactionType">
                <input id="transactionDate" type="date" class="w-full border p-2 rounded">
                <input id="transactionDescription" placeholder="Descri√ß√£o" class="w-full border p-2 rounded">
                <input id="transactionCategory" placeholder="Categoria" class="w-full border p-2 rounded">
                <div id="transactionSourceContainer" class="flex gap-2">
                    <button type="button" class="source-selector flex-1 border p-2 rounded" data-source="banco">Banco</button>
                    <button type="button" class="source-selector flex-1 border p-2 rounded" data-source="caixa">Caixa</button>
                </div>
                <input id="transactionAmount" type="number" step="0.01" placeholder="Valor" class="w-full border p-2 rounded">
                
                <div id="transactionStatusContainer" class="hidden flex gap-4 mt-2">
                    <label class="flex items-center cursor-pointer">
                        <input type="radio" name="transactionStatus" id="pago" value="pago" class="text-green-600 focus:ring-green-500">
                        <span class="ml-2 text-sm font-medium text-gray-700">Recebido (Pago)</span>
                    </label>
                    <label class="flex items-center cursor-pointer">
                        <input type="radio" name="transactionStatus" id="a_receber" value="a_receber" class="text-orange-500 focus:ring-orange-500">
                        <span class="ml-2 text-sm font-medium text-gray-700">A Receber</span>
                    </label>
                </div>
                
                <div class="flex justify-end gap-2 mt-4">
                    <button type="button" id="cancelTransactionBtn" class="px-4 py-2 bg-gray-200 rounded">Cancelar</button>
                    <button type="submit" id="saveTransactionBtn" class="px-4 py-2 bg-green-600 text-white rounded">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <div id="forgotPasswordModal" class="hidden fixed inset-0 bg-gray-900/75 flex items-center justify-center z-[70]"><div class="bg-white p-6 rounded-lg w-80"><h3 class="font-bold mb-2">Resetar Senha</h3><input id="resetEmailInput" type="email" placeholder="Email" class="w-full border p-2 rounded"><div class="mt-4 flex justify-end gap-2"><button id="cancelResetBtn" class="px-4 py-2 bg-gray-200 rounded">Voltar</button><button id="sendResetEmailBtn" class="px-4 py-2 bg-blue-600 text-white rounded">Enviar</button></div></div></div>

    <div id="settingsModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 backdrop-blur-sm flex items-center justify-center p-4 z-[80] hidden modal-enter">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]">

            <div class="p-5 border-b bg-gray-50 flex justify-between items-center shrink-0">
                <h3 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                    ‚öôÔ∏è Configura√ß√µes
                </h3>
                <button id="closeSettingsModalBtn" class="text-gray-400 hover:text-gray-600 text-2xl font-light">&times;</button>
            </div>

            <div id="settingsForm" class="p-6 space-y-5 overflow-y-auto custom-scrollbar">

                <div class="bg-indigo-50 border border-indigo-100 rounded-lg p-4">
                    <label class="block text-xs font-bold text-indigo-800 uppercase mb-2">
                        Logotipo da Empresa
                    </label>
                    <div class="flex items-center gap-4">
                        <div class="relative w-20 h-20 bg-white border border-indigo-200 rounded-lg flex items-center justify-center overflow-hidden shrink-0 shadow-sm">
                            <img id="logoPreview" src="" class="w-full h-full object-contain p-1 hidden" alt="Logo">
                            <div id="logoPlaceholder" class="text-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-200 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                            </div>
                            <div id="uploadLoader" class="absolute inset-0 bg-white/80 flex items-center justify-center hidden">
                                <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-indigo-600"></div>
                            </div>
                        </div>

                        <div class="flex-1">
                            <input type="file" id="logoInput" accept="image/*" class="block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-indigo-600 file:text-white hover:file:bg-indigo-700 cursor-pointer mb-1"/>
                            <p class="text-[10px] text-gray-500">Aparece no topo do link p√∫blico.</p>
                            <p id="uploadStatus" class="text-[10px] font-bold mt-1 h-3"></p>
                            <input type="hidden" id="logoUrl"> 
                        </div>
                    </div>
                </div>

                <div class="bg-blue-50 border border-blue-100 rounded-lg p-4">
                    <h4 class="text-xs font-bold text-blue-700 uppercase mb-3">Dados para PIX Autom√°tico</h4>
                    <div class="space-y-3">
                        <div class="mb-3">
                            <label class="block text-xs font-semibold text-gray-600 mb-1">Chave PIX</label>
                            <input type="text" id="pixKey" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 text-sm font-mono" placeholder="CPF, CNPJ, Email...">
                        </div>
                        <div>
                            <label class="block text-xs font-semibold text-gray-600 mb-1">Nome do Benefici√°rio</label>
                            <input type="text" id="pixBeneficiary" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 text-sm" placeholder="Nome Completo">
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs font-semibold text-gray-600 mb-1">% Adiantamento</label>
                        <div class="relative">
                            <input type="number" id="entryPercent" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 text-sm pl-2" placeholder="50">
                            <span class="absolute right-3 top-2 text-gray-400 text-sm">%</span>
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-semibold text-gray-600 mb-1">WhatsApp</label>
                        <input type="tel" id="whatsapp" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 text-sm" placeholder="DDD + N√∫mero">
                    </div>
                </div>

            </div>

            <div class="p-5 border-t bg-gray-50 flex justify-end gap-3 shrink-0">
                <button type="button" id="cancelSettingsBtn" class="px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 text-sm font-medium">Cancelar</button>
                <button type="submit" id="saveSettingsBtn" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm text-sm font-bold flex items-center gap-2">
                    Salvar Altera√ß√µes
                </button>
            </div>

        </div>
    </div>
    
    <div id="cookieBanner" class="hidden fixed bottom-0 w-full bg-gray-900 text-white p-4 flex justify-between items-center z-50">
    <p class="text-sm">
        Usamos cookies essenciais para seguran√ßa. Leia nossa 
        <a href="https://paglucrobr.com/gestor-termos-e-privacidade" target="_blank" class="underline text-blue-400 hover:text-blue-300 transition">Termos de Uso e Pol√≠tica de
Privacidade</a>.
    </p>
    <button id="cookieAcceptBtn" class="bg-blue-600 px-4 py-1 rounded text-sm hover:bg-blue-700 transition">OK</button>
</div>

    <template id="partTemplate"><div class="part-item border p-4 rounded-md bg-gray-50 relative space-y-3 mb-4"><button type="button" class="remove-part-btn absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow hover:bg-red-600">&times;</button><div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3"><div class="relative col-span-1 md:col-span-2 flex items-center"><input type="text" placeholder="Pe√ßa (ex: Camisa)" class="p-2 border rounded-md w-full part-type focus:ring-2 focus:ring-blue-500 outline-none" list="part-type-list"><button type="button" class="manage-options-btn p-1 absolute right-1 text-gray-400 hover:text-gray-600" data-type="partTypes">‚öôÔ∏è</button></div><div class="relative flex items-center"><input type="text" placeholder="Material" class="p-2 border rounded-md w-full part-material focus:ring-2 focus:ring-blue-500 outline-none" list="part-material-list"><button type="button" class="manage-options-btn p-1 absolute right-1 text-gray-400 hover:text-gray-600" data-type="materialTypes">‚öôÔ∏è</button></div><input type="text" placeholder="Cor" class="p-2 border rounded-md w-full part-color-main focus:ring-2 focus:ring-blue-500 outline-none"></div><div class="flex items-center space-x-2 pt-2 border-t mt-2"><span class="text-xs font-semibold text-gray-500 uppercase">Modo:</span><button type="button" class="part-type-selector text-sm px-2 py-1 rounded" data-type="comum">Simples</button><button type="button" class="part-type-selector text-sm px-2 py-1 rounded" data-type="detalhado">Grade Detalhada</button></div><div class="part-content-container mt-2"></div></div></template>
    <template id="comumPartContentTemplate"><button type="button" class="toggle-sizes-btn mt-2 text-blue-600 text-sm font-semibold hover:underline">+ Mostrar Grade Padr√£o</button><div class="sizes-grid hidden mt-3 grid grid-cols-3 sm:grid-cols-6 gap-2"></div><div class="border-t mt-4 pt-3"><div class="specific-sizes-list space-y-2"></div><button type="button" class="add-specific-size-btn mt-2 bg-gray-100 text-gray-700 text-xs font-bold uppercase py-2 px-3 rounded hover:bg-gray-200">+ Tamanho Personalizado</button></div></template>
    <template id="specificSizeRowTemplate"><div class="specific-size-row grid grid-cols-12 gap-2 items-center"><div class="col-span-3"><input type="text" placeholder="L (cm)" class="p-1 border rounded w-full text-xs item-spec-width"></div><div class="col-span-3"><input type="text" placeholder="A (cm)" class="p-1 border rounded w-full text-xs item-spec-height"></div><div class="col-span-5"><input type="text" placeholder="Obs" class="p-1 border rounded w-full text-xs item-spec-obs"></div><div class="col-span-1 flex justify-center"><button type="button" class="remove-specific-row-btn text-red-400 hover:text-red-600 font-bold">&times;</button></div></div></template>
    <template id="detalhadoPartContentTemplate"><div class="detailed-sizes-grid-container p-3 border border-gray-200 rounded-lg bg-white mb-4"><h4 class="font-bold text-xs text-gray-500 uppercase mb-2">1. Quantidade por Tamanho</h4></div><button type="button" class="generate-detailed-lines-btn mt-2 w-full bg-indigo-50 text-indigo-700 border border-indigo-100 font-semibold py-2 px-4 rounded-lg hover:bg-indigo-100 transition flex items-center justify-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd" /></svg> 2. Gerar Lista de Nomes</button><div class="detailed-list-wrapper hidden mt-4 border-t pt-4"><div class="flex justify-between items-center mb-2"><h4 class="font-bold text-xs text-gray-500 uppercase">3. Nomes & N√∫meros</h4><button type="button" class="add-manual-detailed-row-btn text-xs bg-gray-100 px-2 py-1 rounded hover:bg-gray-200">+ Linha Manual</button></div><div class="detailed-items-list space-y-2 mt-3 bg-gray-50 p-2 rounded border"></div></div></template>
    <template id="financialRowTemplate"><div class="financial-item grid grid-cols-12 gap-2 items-center border-b pb-2 last:border-0"><div class="col-span-4 font-medium text-sm financial-part-name leading-tight"><span>Item</span><span class="block text-xs font-normal text-gray-400 price-group-label"></span></div><div class="col-span-2 text-center"><input type="number" class="p-1 border rounded w-full bg-gray-50 text-center text-sm financial-quantity" readonly></div><div class="col-span-3"><div class="flex items-center relative"><span class="text-gray-400 absolute left-1 text-xs">R$</span><input type="number" step="0.01" class="p-1 border rounded w-full pl-5 text-sm financial-price"></div></div><div class="col-span-3 text-right"><p class="font-bold text-sm text-gray-800 financial-subtotal">R$ 0,00</p></div></div></template>

    <datalist id="part-type-list"></datalist>
    <datalist id="part-material-list"></datalist>
    
    <script>
    // --- CONFIGURA√á√ÉO DE AVISOS DE ATUALIZA√á√ÉO ---
    // Mude este c√≥digo sempre que quiser notificar os usu√°rios
    const VERSAO_ATUAL = "1.0.1"; // Ex: Mude para "1.0.1" na pr√≥xima vez
    
    const MENSAGEM_ATUALIZACAO = `
        <strong>‚ö†Ô∏è Atualiza√ß√£o Importante (v${VERSAO_ATUAL})</strong><br><br>
        Realizamos melhorias e seu sistema ser√° atualizado em breve.<br>
        Recomendamos fortemente que voc√™ fa√ßa um <strong>Backup Manual</strong> 
        dos seus dados hoje para garantir a integridade das informa√ß√µes.<br><br>
        Obrigado por usar o PagLucro Gestor!
    `;
    // ---------------------------------------------

    document.addEventListener("DOMContentLoaded", () => {
        const ultimaVersaoVista = localStorage.getItem("versao_aviso_lida");
        
        // Se a vers√£o mudou, mostra o aviso
        if (ultimaVersaoVista !== VERSAO_ATUAL) {
            const modal = document.getElementById('infoModal');
            const msgElement = document.getElementById('infoModalMessage');
            const btn = document.getElementById('infoModalCloseBtn');

            if (modal && msgElement && btn) {
                // Configura a mensagem (aceita HTML para negrito/quebra de linha)
                msgElement.innerHTML = MENSAGEM_ATUALIZACAO;
                
                // Mostra o modal
                modal.classList.remove('hidden');

                // Quando clicar em OK, salva que j√° leu
                btn.onclick = function() {
                    localStorage.setItem("versao_aviso_lida", VERSAO_ATUAL);
                    modal.classList.add('hidden');
                };
            }
        }
    });
</script>

<script src="js/main.js" type="module"></script>
    
</body>
</html>











